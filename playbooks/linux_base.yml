---
- name: Install base roles on all Linux servers
  hosts: linux
  become: true
  roles:
    # - role: ../roles/linux_base
    #   vars:
    #     use_proxy: false
    #     use_ssl_certificate: false
    #     join_domain: false

    # - role: ../roles/linux_cockpit
    #   vars:
    #     use_ssl_certificate: false
    #     cockpit_port: 9091

    # - role: ../roles/linux_redis
    #   vars:
    #     redis_version: 6.2.6
    #     redis_port: 6379

    # - role: ../roles/linux_postgresql
    #   vars:
    #     postgresql_version: 14

    # - role: ../roles/linux_mariadb
    #   vars:
    #     mariadb_version: 10.6
    #     mariadb_root_password: MyPassword123

    - role: ../roles/linux_haproxy
      vars:
        haproxy_version: 2.4.13
        use_ssl: false
        balance_algorithm: source
        hash_type: consistent
        backend_servers:
          - { name: test-srv-03, ip: 192.168.122.138:80 }
          - { name: test-srv-04, ip: 192.168.122.75:80 }
